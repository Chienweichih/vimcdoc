<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>VIM: mlang</title>
<link rel="stylesheet" href="vim-stylesheet.css" type="text/css">
</head>
<body>
<div id=banner>
<a href="help.html">幫助總覽</a> &middot;
<a href="quickref.html">快速參考</a> &middot;
<a href="index.html">命令索引</a> &middot;
<a href="usr_toc.html">用戶手冊</a> &middot;
<a href="help.html#reference_toc">參考手冊</a>
</div>

<div id=outer>
<h2>mlang</h2>
<pre>
<b class="vimtag"> <a name="mlang.txt">mlang.txt</a> </b>     For Vim version 8.0.  最近更新: 2017年8月


                  <code class="vim">VIM 參考手冊    by Bram Moolenaar</code>
          <code class="vim">譯者</code>: jwdu &lt;junweidu@ustc.edu&gt;，iCrazy &lt;icrazy@ustc.edu&gt;
                            http://vimcdoc.sf.net


多語言特性                                      <b class="vimtag"> <a name="multilang">multilang</a> </b> <b class="vimtag"> <a name="multi-lang">multi-lang</a> </b>

這裡講的是使用各種不同語言的信息和菜單。如果希望編輯多字節文本請參看
 <a href="mbyte.html#multibyte">multibyte</a> 。

基本的使用請參看用戶手冊  <a href="usr_45.html#usr_45.txt">usr_45.txt</a> 。

1. 信息                          <a href="mlang.html#multilang-messages">multilang-messages</a> 
2. 菜單                          <a href="mlang.html#multilang-menus">multilang-menus</a> 
3. 腳本                          <a href="mlang.html#multilang-scripts">multilang-scripts</a> 

同時請參看  <a href="helphelp.html#help-translated">help-translated</a>  閱讀有關多語言幫助使用。

<code class="notvi">{Vi 沒有以上的功能}</code>
<code class="notvi">{僅當編譯時加入  <a href="various.html#+multi_lang">+multi_lang</a>  特性才有效}</code>

</pre><hr class="doubleline" /><pre>
<h4>1. 信息                                                 <b class="vimtag"> <a name="multilang-messages">multilang-messages</a> </b></h4>
Vim 從環境變量中獲取當前 locale 信息。這意味著在大部分的情形下，Vim 將使用你喜
歡的語言，除非這種語言不存在。

為了知道你的系統所支持的語言列表，可以查看以下的路徑 (針對 Unix):
<code class="section">        /usr/lib/locale </code>
<code class="section">        /usr/share/locale </code>
不幸的是，大小寫是區分的。同時還要<code class="note">注意</code> "-" 和 "_" 不要用混了。

(<code class="vim">譯者注</code>: Windows 上，簡體/繁體中文對應語言是 chinese_china 和 chinese_taiwan，
它們在內部被翻譯為 zh_CN 和 zh_TW。換而言之，可以用 
<code class="example">        :language chinese_china " 不能直接用 zh_CN</code>
但 
<code class="example">        :echo v:lang</code>
<code class="example">        zh_CN</code>
這一翻譯機制目前來自硬編碼，因而看來沒有 UTF-8 對應形式的支持。)

                                            <b class="vimtag"> <a name=":lan">:lan</a> </b> <b class="vimtag"> <a name=":lang">:lang</a> </b> <b class="vimtag"> <a name=":language">:language</a> </b> <b class="vimtag"> <a name="E197">E197</a> </b>
:lan[guage]
:lan[guage] mes[sages]
:lan[guage] cty[pe]
:lan[guage] tim[e]
                        顯示當前的語言 (即 locale)。
                        使用 "messages" 參數會顯示出用作消息的語言。術語:
                        LC_MESSAGES。
                        使用 "ctype" 參數，會顯示出用作字符編碼的語言。術語:
                        LC_CTYPE。
                        使用 "time" 參數會顯示出用作 strftime() 的語言。術語:
                        LC_TIME。
                        不加參數時顯示當地語言的全稱 (這個功能依賴於系統)。
                        當前的語言同樣也可以通過變量  <a href="eval.html#v:lang">v:lang</a> 、 <a href="eval.html#v:ctype">v:ctype</a>  和
                         <a href="eval.html#v:lc_time">v:lc_time</a>  來獲得。

:lan[guage] <code class="special">{name}</code>
:lan[guage] mes[sages] <code class="special">{name}</code>
:lan[guage] cty[pe] <code class="special">{name}</code>
:lan[guage] tim[e] <code class="special">{name}</code>
                        把當前的語言 (即 locale) 設置成 <code class="special">{name}</code>。
                        此處的 <code class="special">{name}</code> 必須是你系統上的一個有效的語言。一些系統
                        接受像 "en" 或 "en_US" 這樣的別名，但是，一些系統只接
                        受像 "en_US.ISO_8859-1" 這樣完整的名稱。Unix 系統上可
                        以用以下命令查看支持的 locale: 
<code class="example">                                :!locale -a</code>
                        借助於參數 "messages"，你就可以設置消息使用的語言。如
                        果你希望的話，這兩者可以不同，例如: 當你編輯日文文本時
                        使用英文消息。它設置 $LC_MESSAGES。
                        借助於參數 "ctype"，你就可以設置用作字符編碼的語言。這
                        將會影響到 Vim 所連接的庫。一般不能將它和 <a href="options.html#'encoding'">'encoding'</a>
                        設成不同的值，除非是 "C"。它設置 $LC_CTYPE。
                        借助於參數 "time" 參數，你就可以設置用作時間和日期消息
                        的語言。它影響到 strftime()。它設置 $LC_TIME。
                        沒有參數時，以上兩者都會被設置，另外還會設置 $LANG。
                        編譯時加上  <a href="various.html#+float">+float</a>  特性時，LC_NUMERIC 值總會被設為
                        "C"，以便浮點數使用 '.' 作為十進制小數點。
                        這將會使那些依賴語言的項目 (信息，時間和日期的格式) 看
                        起來有一些不同。這不是所有系統都完全支持的。
                        如果設置失敗，將會返回一個出錯信息。如果設置成功，將不
                        會有任何信息。例如: 
<code class="example">                                :language</code>
<code class="example">                                Current language: C</code>
<code class="example">                                :language de_DE.ISO_8859-1</code>
<code class="example">                                :language mes</code>
<code class="example">                                Current messages language: de_DE.ISO_8859-1</code>
<code class="example">                                :lang mes en</code>


MS-WINDOWS 信 息 的 翻 譯                               <b class="vimtag"> <a name="win32-gettext">win32-gettext</a> </b>

如果你用了自安裝的 .exe 文件，應該不需要什麼設置。否則你可能找不到
libintl.dll 文件。可以從下面的網站得到它:

        http://sourceforge.net/projects/gettext
或:
        https://mlocati.github.io/gettext-iconv-windows/

這裡還包含了 xgettext，msgformat 以及其它工具。

libintl.dll 應該和 (g)vim.exe 放在同一個目錄內，或者放在環境變量 PATH 指定的那
些目錄裡。Vim 也會查找 libintl-8.dll。消息數據文件 (vim.mo) 應放在
"$VIMRUNTIME/lang/xx/LC_MESSAGES"，在這裡 "xx" 是語言的縮寫 (多數是兩個字母)。

如果你製作了自己的翻譯，那麼，你需要生成 .po 文件並把它轉化為 .mo 文件。同時，
找到 Vim 的源代碼並閱讀 "src/po/README.txt" 文件。

如果你不想使用自動選擇的語言，那麼就把 $LANG 變量設為你希望的語言。如果你不希
望使用語言翻譯，請設置成 "en"。 
<code class="example"></code>
<code class="example">  :let $LANG = 'ja'</code>
<code class="example"></code>
(Windows 的文本由 Muraoka Taro 完成)

</pre><hr class="doubleline" /><pre>
<h4>2. 菜單                                         <b class="vimtag"> <a name="multilang-menus">multilang-menus</a> </b></h4>
基本的使用請參看  <a href="usr_45.html#45.2">45.2</a> ，尤其是 <a href="options.html#'langmenu'">'langmenu'</a> 的使用部分。

<code class="note">注意</code> 如果在翻譯後對菜單作了更改，菜單的一些選項可能會顯示成英文。請聯繫翻譯的
維護者並請求他更新菜單的翻譯。你可以在 "$VIMRUNTIME/lang/menu_<code class="special">&lt;lang&gt;</code>.vim" 中找
到翻<code class="vim">譯者</code>的名字和 e-mail 地址。

為菜單設定字體 (或字體集)，請用  <a href="syntax.html#:highlight">:highlight</a>  命令。例如: 
<code class="example"></code>
<code class="example">        :highlight Menu font=k12,r12</code>
<code class="example"></code>
<code class="example"></code>
LOCALE 的 別 名

不幸的是，即使使用相同的語言和編碼，不同系統上的當地語言名稱也可能是不同的。如
果你沒有得到你需要的菜單翻譯，請檢查下面命令的輸出: 
<code class="example"></code>
<code class="example">        echo v:lang</code>
<code class="example"></code>
現在，檢查 "$VIMRUNTIME/lang" 目錄中有沒有使用相似語言的翻譯文件。<code class="note">注意</code> 符號
"-" 和 "_" 的區別，它可能是找不到文件的罪魁禍首！另外一個通常要<code class="note">注意</code>的差別是
"iso8859-1" 和 "iso_8859-1"。所幸的是，Vim 把所有的名字都轉換成小寫了。因此，
你沒有必要擔心大小寫的差別。為了避免空格被忘掉，它們被轉化成下劃線。

如果你發現了一個不同文件名的菜單翻譯，你可以在自己的 runtime 目錄下建立一個文
件並裝載之。這個文件的名字可以是: 
<code class="example"></code>
<code class="example">        ~/.vim/lang/menu_&lt;v:lang&gt;.vim</code>
<code class="example"></code>
檢查 <a href="options.html#'runtimepath'">'runtimepath'</a> 選項以確定會搜索哪些目錄。在此文件中寫一個命令來裝載那個使
用不同名字的菜單文件: 
<code class="example"></code>
<code class="example">        runtime lang/menu_&lt;other_lang&gt;.vim</code>
<code class="example"></code>
<code class="example"></code>
翻 譯 菜 單

如果你想自己翻譯菜單，你可以使用  <a href="mlang.html#:menutrans">:menutrans</a>  命令，下面有一些說明。推薦把每種
語言的翻譯放到單獨的 Vim 腳本文件中。如果一種語言還沒有被翻譯，你可以成為它的
維護者，並把你的翻譯貢獻出來，以便能讓其它 Vim 用戶使用。如果你要這樣的意願的
話，請發 e-mail 給 Vim 的維護者: &lt;maintainer@vim.org&gt;。

                                        <b class="vimtag"> <a name=":menut">:menut</a> </b> <b class="vimtag"> <a name=":menutrans">:menutrans</a> </b> <b class="vimtag"> <a name=":menutranslate">:menutranslate</a> </b>
:menut[ranslate] clear
                        清除所有的菜單翻譯。

:menut[ranslate] <code class="special">{english}</code> <code class="special">{mylang}</code>
                        將菜單名稱 <code class="special">{english}</code> 翻譯成 <code class="special">{mylang}</code>。像 "&amp;" 和
                        "<code class="special">&lt;Tab&gt;</code>" 這樣的特殊字符也必須包括進去。如同其它  <a href="gui.html#:menu">:menu</a> 
                        命令中的那樣，空格和句點需要用反斜槓來轉義。
                        忽略 <code class="special">{english}</code> 中的大小寫。

你可以在 $VIMRUNTIME/lang 目錄中找到例子。

為了檢驗你的翻譯，首先你需要清除所有的菜單。用下面的方法你可以不重新啟動 Vim
就達到這樣的效果: 
<code class="example">        :source $VIMRUNTIME/delmenu.vim</code>
<code class="example">        :source &lt;your-new-menu-file&gt;</code>
<code class="example">        :source $VIMRUNTIME/menu.vim</code>
<code class="example"></code>
菜單路徑的每一個部分是被獨立的翻譯的。這就意味著: 如果 "Help" 被翻譯成
"幫助"， "Overview" 被翻譯成 "總覽"，那麼 "Help.Overview" 就會被翻譯成
"幫助.總覽"。

</pre><hr class="doubleline" /><pre>
<h4>3. 腳本                                                 <b class="vimtag"> <a name="multilang-scripts">multilang-scripts</a> </b></h4>
在 Vim 腳本中，你可以用  <a href="eval.html#v:lang">v:lang</a>  變量獲得當前的 locale。缺省值是 "C" 或者來自
於環境變量 $LANG。

以下這個例子展示了這個變量的一個簡單的應用，它可以顯示出針對用戶喜好語言的信
息: 
<code class="example"></code>
<code class="example">        :if v:lang =~ "zh_CN"</code>
<code class="example">        :  echo "早上好"</code>
<code class="example">        :else</code>
<code class="example">        :  echo "Good morning"</code>
<code class="example">        :endif</code>


 vim:tw=78:sw=4:ts=8:ft=help:norl:
</pre>
<p><i>Generated by vim2html</i></p>
</div>
</body>
</html>
