<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>VIM: os_dos</title>
<link rel="stylesheet" href="vim-stylesheet.css" type="text/css">
</head>
<body>
<div id=banner>
<a href="help.html">幫助總覽</a> &middot;
<a href="quickref.html">快速參考</a> &middot;
<a href="index.html">命令索引</a> &middot;
<a href="usr_toc.html">用戶手冊</a> &middot;
<a href="help.html#reference_toc">參考手冊</a>
</div>

<div id=outer>
<h2>os_dos</h2>
<pre>
<b class="vimtag"> <a name="os_dos.txt">os_dos.txt</a> </b>    For Vim version 8.0.  最近更新: 2017年8月


                  <code class="vim">VIM 參考手冊    by Bram Moolenaar</code>
                                     <code class="vim">譯者</code>: Dasn
                                     http://vimcdoc.sf.net

                                                        <b class="vimtag"> <a name="dos">dos</a> </b> <b class="vimtag"> <a name="DOS">DOS</a> </b>
本文描述 MS-DOS 和 Win32 版本共有的特性。你還可以參考
 <a href="os_win32.html#os_win32.txt">os_win32.txt</a>  和  <a href="os_msdos.html#os_msdos.txt">os_msdos.txt</a> 。

1. 文件位置                      <a href="os_dos.html#dos-locations">dos-locations</a> 
2. 使用反斜槓                    <a href="os_dos.html#dos-backslash">dos-backslash</a> 
3. 標準映射                      <a href="os_dos.html#dos-standard-mappings">dos-standard-mappings</a> 
4. 屏幕的輸出與顏色              <a href="os_dos.html#dos-colors">dos-colors</a> 
5. 文件格式                      <a href="os_dos.html#dos-file-formats">dos-file-formats</a> 
6. :cd 命令                      <a href="os_dos.html#dos-:cd">dos-:cd</a> 
7. 中止鍵                        <a href="os_dos.html#dos-CTRL-Break">dos-CTRL-Break</a> 
8. 臨時文件                      <a href="os_dos.html#dos-temp-files">dos-temp-files</a> 
9. 默認的外殼選項                <a href="os_dos.html#dos-shell">dos-shell</a> 

</pre><hr class="doubleline" /><pre>
<h4>1. 文件位置                                             <b class="vimtag"> <a name="dos-locations">dos-locations</a> </b></h4>
只要你把 Vim 的可執行文件 (vim.exe)、幫助文件的目錄 (doc) 以及語法文件的目錄
(syntax) 放到同一個目錄下，Vim 就可以工作了，不需要額外的配置，也不需要修改注
冊表或添加環境變量，只要保證 Vim 目錄包含在路徑中，或者在桌面上做一個快捷方式
也可以。

通常 Vim 資源文件 ("_vimrc" 和 "_gvimrc") 放在 Vim 運行目錄的上一級目錄。如果
你想把它放在別的地方，可以設置環境變量指向資源文件所在的目錄，例如: 
<code class="example">        set VIM=C:\user\piet</code>
Vim 會在 "c:\user\piet\" 下尋找資源文件。
<code class="note">備註</code>: 多用戶計算機需要這種功能，否則還是把 _vimrc 放在原來的地方簡單些。

如果你改變了 vim.exe 的位置，就需要設置一下 $VIM 變量，這樣相應的運行目錄
(runtime directory) 就是 "$VIM/vim<code class="special">{version}</code>"。例如: 
<code class="example">        set VIM=E:\vim</code>
Vim 會在 "e:\vim\vim54" 尋找 5.4 版本運行時需要的文件。
<code class="note">備註</code>: 強烈建議不要這樣做。最好把可執行文件和運行時需要的文件放到同一個目錄裡。

如果你把可執行文件和資源文件都移動了，那麼你必須用 $VIM 和 $VIMRUNTIME 兩個環
境變量來分別指定資源文件 ("_vimrc" 和 "_gvimrc") 和運行目錄的位置。例如: 
<code class="example">        set VIM=C:\usr\piet</code>
<code class="example">        set VIMRUNTIME=E:\vim\vim54</code>
這樣，Vim 可以在 "c:\user\piet\" 目錄下找到資源文件，在 "E:\vim\vim54" 目錄下
找到運行時所需的文件。

要想瞭解更多內容，見  <a href="starting.html#$VIM">$VIM</a>  和  <a href="starting.html#$VIMRUNTIME">$VIMRUNTIME</a> 。

在 Windows 95 上，你可以在 C:\autoexec.bat 裡設置 $VIM。例如: 
<code class="example">  set VIM=D:\vim</code>
在 Windows NT 上，你可以在 "控制面板－系統" 或者右鍵單擊 "我的電腦"－"屬性"，
"環境變量" 選項卡裡為每一個用戶設置環境變量。

</pre><hr class="doubleline" /><pre>
<h4>2.使用反斜槓                                            <b class="vimtag"> <a name="dos-backslash">dos-backslash</a> </b></h4>
在文件名 (這裡是指帶路徑的文件名 <code class="vim">譯者</code>) 裡使用反斜槓 (\) 可能會出問題。在某些命
令裡，VI 要用兩個反斜槓表示反斜槓。Vim 在這一問題上寬容一些，它不會從文件名中
刪除反斜槓，所以直接用 ":e c:\foo\bar" 就可以工作。但是當反斜槓出現在一些特殊
字符 (空格、逗號、反斜槓，等等) 前面時，Vim 就會刪除反斜槓。用斜槓來避免問題:
":e c:/foo/bar"，同樣可以。Vim 會自動把斜槓替換成反斜槓以避免一些 MS-DOS 或
Win32 程序產生問題。

如果你喜歡用斜槓，就設置 <a href="options.html#'shellslash'">'shellslash'</a> 選項。Vim 就會在自動補全文件名的時候，用
斜槓代替反斜槓。這在你使用 UNIX 風格的 <a href="options.html#'shell'">'shell'</a> 時，特別有用。

</pre><hr class="doubleline" /><pre>
<h4>3. 標準映射                                     <b class="vimtag"> <a name="dos-standard-mappings">dos-standard-mappings</a> </b></h4>
<code class="keystroke">CTRL-PageUp</code> 和 <code class="keystroke">CTRL-PageDown</code> 的原有映射已經被取消了，現在它們的功能是跳轉到下
一個或者前一個標籤頁  <a href="tabpage.html#%3CC-PageUp%3E">&lt;C-PageUp&gt;</a>   <a href="tabpage.html#%3CC-PageDown%3E">&lt;C-PageDown&gt;</a> 

如果你想要讓它們移動到屏幕行的首行和末行，這樣映射:

<code class="section">鍵              鍵碼            正常/可視模式       插入模式 </code>
<code class="keystroke">CTRL-PageUp</code>     <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-C-D&gt;</code>        H               <code class="special">&lt;C-O&gt;</code>H
<code class="keystroke">CTRL-PageDown</code>   <code class="special">&lt;M-N&gt;</code>v              L$              <code class="special">&lt;C-O&gt;</code>L<code class="special">&lt;C-O&gt;</code>$

此外，下面這些鍵用於複製/剪切/粘貼。Win32 版本和 DJGPP 版本使用剪貼板。

Shift-Insert    粘貼文本 (從剪貼板)                             <b class="vimtag"> <a name="%3CS-Insert%3E">&lt;S-Insert&gt;</a> </b>
<code class="keystroke">CTRL-Insert</code>     複製選擇的文本 (到剪貼板)                       <b class="vimtag"> <a name="%3CC-Insert%3E">&lt;C-Insert&gt;</a> </b>
<code class="keystroke">CTRL-Del</code>        剪切選擇的文本 (到剪貼板)                       <b class="vimtag"> <a name="%3CC-Del%3E">&lt;C-Del&gt;</a> </b>
Shift-Del       剪切選擇的文本 (到剪貼板)                       <b class="vimtag"> <a name="%3CS-Del%3E">&lt;S-Del&gt;</a> </b>
<code class="keystroke">CTRL-X</code>          剪切可視文本 (到剪貼板)

這些鍵是這樣映射的 (Win32 和 DJGPP 版本):

<code class="section">鍵              鍵碼         正常       可視        插入 </code>
Shift-Insert    <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-T&gt;</code>   "*P        "-d"*P      <code class="special">&lt;C-R&gt;</code><code class="special">&lt;C-O&gt;</code>*
<code class="keystroke">CTRL-Insert</code>     <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-U&gt;</code>              "*y
Shift-Del       <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-W&gt;</code>              "*d
<code class="keystroke">CTRL-Del</code>        <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-X&gt;</code>              "*d

或這樣映射 (非 Win32 版本):

<code class="section">鍵              鍵碼         正常       可視        插入 </code>
Shift-Insert    <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-T&gt;</code>   P          "-dP        <code class="special">&lt;C-R&gt;</code><code class="special">&lt;C-O&gt;</code>"
<code class="keystroke">CTRL-Insert</code>     <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-U&gt;</code>              y
Shift-Del       <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-W&gt;</code>              d
<code class="keystroke">CTRL-Del</code>        <code class="special">&lt;M-N&gt;</code><code class="special">&lt;M-X&gt;</code>              d
<code class="keystroke">CTRL-X</code>          <code class="special">&lt;C-X&gt;</code>                   "*d

如果系統支持剪貼板，Vim 就會使用 "* 寄存器。

</pre><hr class="doubleline" /><pre>
<h4>4. 屏幕的輸出與顏色                                     <b class="vimtag"> <a name="dos-colors">dos-colors</a> </b></h4>
默認的寫屏操作是直接調用 bios 完成的，這在大多數系統上可以工作。你不需要用
ansi.sys。你可以使用 ":mode" 命令設置當前屏幕模式。見  <a href="term.html#:mode">:mode</a> 。

要想改變 Vim 的顏色，可以使用  <a href="syntax.html#:highlight">:highlight</a>  命令。Normal 高亮組 (highlight
group) 決定了 Vim 用什麼顏色顯示普通的文本。例如，要設置灰色字體和藍色背景: 
<code class="example">        :hi Normal ctermbg=Blue ctermfg=grey</code>
要瞭解其它可用的高亮組，參見  <a href="syntax.html#highlight-groups">highlight-groups</a> 。

DOS 控制台不支持 "粗體"、"下劃線" 之類的屬性。你可以用九個終端選項來設置五種屬
性值的顏色。<code class="note">備註</code>: 因為你可以用 ":highlight" 命令直接設置顏色，這些選項並沒有必
要。它們是為了兼容老版本的 Vim 而保留的。 <a href="options.html#'highlight'">'highlight'</a>  選項指定每種行為使用五
種模式中的哪一種。九個終端選項如下:

<code class="example">        :set t_mr=^V^[\|xxm             反轉模式開始</code>
<code class="example">        :set t_md=^V^[\|xxm             粗體模式開始</code>
<code class="example">        :set t_me=^V^[\|xxm             返回正常文本</code>
<code class="example"></code>
<code class="example">        :set t_so=^V^[\|xxm             突出模式開始</code>
<code class="example">        :set t_se=^V^[\|xxm             返回正常文本</code>
<code class="example"></code>
<code class="example">        :set t_us=^V^[\|xxm             下劃線模式開始</code>
<code class="example">        :set t_ue=^V^[\|xxm             返回正常文本</code>
<code class="example"></code>
<code class="example">        :set t_ZH=^V^[\|xxm             斜體模式開始</code>
<code class="example">        :set t_ZR=^V^[\|xxm             返回正常文本</code>
<code class="example"></code>
^V 代表 <code class="keystroke">CTRL-V</code>
^[ 代表 <code class="special">&lt;Esc&gt;</code>

(在輸入上面的命令時，按下 <code class="keystroke">CTRL-V</code> Vim 只會顯示 ^，這時不要輸入 V，直接輸入
<code class="special">&lt;Esc&gt;</code> 即可。<code class="vim">譯者</code>)

你必須把上面命令裡的 xx 換成相應的十進制數，這個數是前景色與背景色相加的和:

<code class="section">顏色                    前景色          背景色  </code>
黑色                    0               0
暗藍色                  1               16
暗綠色                  2               32
灰綠色                  3               48
暗紅色                  4               64
暗紫紅色                5               80
棕色，暗黃色            6               96
亮灰色                  7               112
暗灰色                  8               128 *
藍色，天藍色            9               144 *
綠色，淺綠色            10              160 *
青綠色，蘭綠色          11              176 *
紅色，亮紅色            12              192 *
紫紅色，亮紫紅色        13              208 *
黃色，淺黃色            14              224 *
白色                    15              240 *

* 在某些顯示模式下，大於 128 的顏色代碼可能不起作用，並且代碼 128 會使字體閃
爍。

代碼 0 表示顏色恢復到起始狀態 (起始狀態的值通常是 7，亮灰色文字，黑色背景，但
你可以修改。如果你在命令行提示上修改了缺省的顏色，你可能需要在 vimrc 文件裡調
整一些高亮的顏色--見下面)。
這就是 <a href="term.html#'t_me'">'t_me'</a> 的初始值。

下面是 Vim 默認高亮模式:
        t_mr    112      反轉模式: 黑色文字 (0)，亮灰色背景 (112)
        t_md     15      粗體模式: 白色文字 (15)，黑色背景 (0)
        t_me      0      正常模式: 正常模式 (返回默認狀態)

        t_so     31      突出模式: 白色文字 (15)，暗藍色背景 (16)
        t_se      0      突出模式結束 (返回默認狀態)

        t_czh   225      斜體模式: 暗藍色文字 (1)，黃色背景 (224)
        t_czr     0      斜體模式結束 (返回默認狀態)

        t_us     67      下劃線模式: 灰綠色文字 (3)，暗紅色背景 (64)
        t_ue      0      下劃線模式結束 (返回默認狀態)


之所以選擇這些顏色，是因為它們在使用反轉顯示的時候看起來比較舒服，但是你可以改
成你喜歡的顏色。

例如: 
<code class="example">  :set t_mr=^V^[\|97m   " 啟動反轉模式: 暗藍色文字 (1) 棕色背景 (96)</code>
<code class="example">  :set t_md=^V^[\|67m   " 啟動粗體模式: 灰綠色文字 (3) 暗紅色背景 (64)</code>
<code class="example">  :set t_me=^V^[\|112m  " 返回正常模式: 黑色文字 (0) 亮灰色背景 (112)</code>
<code class="example">  :set t_so=^V^[\|37m   " 啟動突出模式: 暗紫紅色文字 (5) 暗綠色背景 (32)</code>
<code class="example">  :set t_se=^V^[\|112m  " 返回正常模式: 黑色文字 (0) 亮灰色背景 (112)</code>
<code class="example"></code>
</pre><hr class="doubleline" /><pre>
<h4>5. 文件格式                                             <b class="vimtag"> <a name="dos-file-formats">dos-file-formats</a> </b></h4>
如果 <a href="options.html#'fileformat'">'fileformat'</a> 設置為 "dos" (這是默認設置)，Vim 把 <code class="special">&lt;NL&gt;</code> 或 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code> 當作行
尾符 (<code class="special">&lt;EOL&gt;</code>)。寫入文件的時候，Vim 使用 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code>。這樣，如果你編輯一個文件並且
保存了，那麼 Vim 會把所有的 <code class="special">&lt;NL&gt;</code> 替換成 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code>。

如果 <a href="options.html#'fileformat'">'fileformat'</a> 設置為 "unix"，Vim 則使用一個 <code class="special">&lt;NL&gt;</code> 作為 <code class="special">&lt;EOL&gt;</code>，並且把 <code class="special">&lt;CR&gt;</code>
顯示為 ^M。

你可以用 Vim 把 <code class="special">&lt;NL&gt;</code> 替換成 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code>: 在任何模式下讀，保存成 Dos 格式
(":set ff=dos")。

你可以用 Vim 把 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code> 替換成 <code class="special">&lt;NL&gt;</code>: 在 Dos 模式下讀，保存成 Unix 格式
(":set ff=unix")。

如果 <a href="options.html#'fileformats'">'fileformats'</a> 非空 (這是默認值)，Vim 會自動設置 <a href="options.html#'fileformat'">'fileformat'</a> 的值，因此你
沒有必要擔心自己究竟在做什麼。
                                         <a href="options.html#'fileformat'">'fileformat'</a>   <a href="options.html#'fileformats'">'fileformats'</a> 

如果你要編輯一個腳本文件或者一個二進制文件，那麼你應該在裝載這個文件之前預先設
定 <a href="options.html#'binary'">'binary'</a> 選項。腳本和二進制文件可能包含 <code class="special">&lt;NL&gt;</code>，Vim 要把它替換成 <code class="special">&lt;CR&gt;</code><code class="special">&lt;NL&gt;</code>。你
可以在啟動時加上 "-b" 參數，這樣可以自動置位 <a href="options.html#'binary'">'binary'</a> 選項。

</pre><hr class="doubleline" /><pre>
<h4>6. :cd 命令                                             <b class="vimtag"> <a name="dos-:cd">dos-:cd</a> </b></h4>
":cd" 命令能識別驅動器符號，並且可以改變當前的驅動器。命令 ":cd c:" 使驅動器 C
成為當前驅動器。命令 ":cd d:\foo"，切換當前目錄到 "D 盤的 foo 目錄下"。Vim 也
能識別 UNC 路徑。例如: ":cd \\server\share\dir"。   <a href="editing.html#:cd">:cd</a> 

</pre><hr class="doubleline" /><pre>
<h4>7. 中止鍵                                               <b class="vimtag"> <a name="dos-CTRL-Break">dos-CTRL-Break</a> </b></h4>
用 <code class="keystroke">CTRL-Break</code> 來代替 <code class="keystroke">CTRL-C</code> 中止查找操作。Vim 只有在接受輸入時才能檢測到
<code class="keystroke">CTRL-C</code>。

</pre><hr class="doubleline" /><pre>
<h4>8. 臨時文件                                             <b class="vimtag"> <a name="dos-temp-files">dos-temp-files</a> </b></h4>
對於 16 位和 32 位的 DOS 版本:
Vim 把臨時文件 (用於過濾) 存放於下列目錄中 (按順序查找下列目錄，一旦發現該目錄
存在並且可以創建文件，就用它存放臨時文件):
        $TMP
        $TEMP
        C:\TMP
        C:\TEMP
        當前目錄

對於 Win32 版本 (控制台和 GUI):
Vim 用標準的 Windows API 函數來獲取臨時文件名 (用於過濾)。按順序查找下列目錄，
一旦發現該目錄存在並且可以創建文件，就用它存放臨時文件:
        $TMP
        $TEMP
        當前目錄

</pre><hr class="doubleline" /><pre>
<h4>9. 默認的外殼選項                                       <b class="vimtag"> <a name="dos-shell">dos-shell</a> </b></h4>
在 Windows 95 上，默認的 <a href="options.html#'sh'">'sh'</a> ( <a href="options.html#'shell'">'shell'</a> ) 選項是 "command.com"，而在 Windows
NT 上是 "cmd.exe"。如果設置了環境變量 SHELL，Vim 就使用 SHELL 指定的程序，如果
沒有設置 SHELL，而設置了環境變量 COMSPEC，Vim 就使用 COMSPEC。Vim 用
"<code class="special">&lt;shell&gt;</code> /c <code class="special">&lt;command_name&gt;</code>" 執行外部命令。輸入 <code class="keystroke">CTRL-Z</code> 啟動一個命令子外殼。要返
回 Vim 輸入 "exit"。     <a href="options.html#'shell'">'shell'</a>   <a href="starting.html#CTRL-Z">CTRL-Z</a> 

如果你運行一個第三方的外殼，你可能需要自己設置一下  <a href="options.html#'shellcmdflag'">'shellcmdflag'</a>  (<a href="options.html#'shcf'">'shcf'</a>)
和  <a href="options.html#'shellquote'">'shellquote'</a>  (<a href="options.html#'shq'">'shq'</a>) 或者  <a href="options.html#'shellxquote'">'shellxquote'</a>  (<a href="options.html#'sxq'">'sxq'</a>) 選項。不幸的是，這些選
項依賴於你所使用的 Vim 的版本。例如，要用 MKS Korn shell 或 bash，這些屬性的值
應該設置成:

<code class="section">                DOS 16 位           DOS 32 位           Win32  </code>
<a href="options.html#'shellcmdflag'">'shellcmdflag'</a>     -c                   -c               -c
<a href="options.html#'shellquote'">'shellquote'</a>       "
<a href="options.html#'shellxquote'">'shellxquote'</a>                                            "

16 位的 Dos 版本這樣啟動外殼:
        <code class="special">&lt;shell&gt;</code> -c "命令" &gt;file
Win32 版本:
        <code class="special">&lt;shell&gt;</code> -c "命令 &gt;file"
32 位 DOS 版本，DJGPP 在內部執行。

Vim 啟動的時候檢查 <a href="options.html#'shell'">'shell'</a> 選項的值是否能匹配 "sh" 子串 (在任何位置)。如果是，
Vim 就按照上面的描述設置 <a href="options.html#'shellcmdflag'">'shellcmdflag'</a> 和 <a href="options.html#'shellquote'">'shellquote'</a> 或 <a href="options.html#'shellxquote'">'shellxquote'</a> 選
項。

 vim:tw=78:ts=8:ft=help:norl:
</pre>
<p><i>Generated by vim2html</i></p>
</div>
</body>
</html>
