<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>VIM: usr_45</title>
<link rel="stylesheet" href="vim-stylesheet.css" type="text/css">
</head>
<body>
<div id=banner>
<a href="help.html">幫助總覽</a> &middot;
<a href="quickref.html">快速參考</a> &middot;
<a href="index.html">命令索引</a> &middot;
<a href="usr_toc.html">用戶手冊</a> &middot;
<a href="help.html#reference_toc">參考手冊</a>
</div>

<div id=outer>
<h2>usr_45</h2>
<pre>
<b class="vimtag"> <a name="usr_45.txt">usr_45.txt</a> </b>    For Vim version 8.0.  最近更新: 2017年8月

                     <code class="vim">VIM 用戶手冊 - by Bram Moolenaar</code>
                     <code class="vim">譯者</code>: lang2 http://vimcdoc.sf.net

                             選擇你的語言


Vim 中各種的消息可以用多種不同的語言給出。本章就介紹如何改變使用的語言。同時還
講解如何編輯各種語言的文件。

 <a href="usr_45.html#45.1">45.1</a>   消息所用語言
 <a href="usr_45.html#45.2">45.2</a>   菜單所用語言
 <a href="usr_45.html#45.3">45.3</a>   使用其它編碼
 <a href="usr_45.html#45.4">45.4</a>   編輯其它編碼的文件
 <a href="usr_45.html#45.5">45.5</a>   文本錄入

           下一章:  <a href="usr_90.html#usr_90.txt">usr_90.txt</a>   安裝 Vim
           前一章:  <a href="usr_44.html#usr_44.txt">usr_44.txt</a>   自定義語法高亮
             目錄:  <a href="usr_toc.html#usr_toc.txt">usr_toc.txt</a> 

</pre><hr class="doubleline" /><pre>
<h4><b class="vimtag"> <a name="45.1">45.1</a> </b>  消息所用語言</h4>
當你啟動 Vim 時，它會檢查環境變量從而找出你所使用的語言。大多數情況下這就夠
了。你會看到你所用語言的消息 (如果有的話)。要查看當前語言，使用命令: 
<code class="example"></code>
<code class="example">        :language</code>
<code class="example"></code>
如果你得到 "C" 的輸出，表示 Vim 在使用缺省的語言 －－ 英語。

        <code class="note">備註</code>:
        只有當多種語言支持被編譯進 Vim 時，你才可能用它來編輯各種不同的語言。
        要找出 Vim 是否支持多語種，看一下 ":version" 命令的輸出中有沒有
        "+gettext" 和 "+multi_lang"。如果有的話，表示應該沒問題了。如果你看到
        "-gettext" 或者 "-multi_lang" 的話你得重找一個 Vim。

如果你想要 Vim 的輸出消息也用另外一種語言呢？有幾種可能的辦法。你應該使用哪一
種取決於你所使用的系統。
   第一種辦法是在啟動 Vim 前設置環境變量。以 Unix 為例: 
<code class="example"></code>
<code class="example">        env LANG=de_DE.ISO_8859-1  vim</code>
<code class="example"></code>
只有你的系統支持該語言的時候這才有效。這個辦法的好處是所有的 GUI 消息和運行庫
裡的消息都會使用正確的語言。缺點是你必須在啟動 Vim 前設定所要用的語言。如果你
想在運行 Vim 當中改變所用的語言，你就得使用第二種辦法: 
<code class="example"></code>
<code class="example">        :language fr_FR.ISO_8859-1</code>
<code class="example"></code>
這樣你可以嘗試使用幾種不同的語種名。當你所指定的語言系統不支持時你會得到一個錯
誤消息。而當所指定語言的消息文件不存在時，你不會被警告。Vim 只會悄悄的使用缺省
的英語。
   要找到系統支持的語言，先要找到列出這些語言的目錄。在我的系統上，這個目錄是
"/usr/share/locale"。有些系統上是 "/usr/lib/locale"。"setlocale" 的手冊頁應該
告訴你該目錄在你使用系統的什麼地方。
   在鍵入那些語種名的時候要當心，大小寫是有區別的，而且 '-' 和 '_' 字符也很容
易被混淆。

你也可以分別為消息，編輯文本和時間等設定所使用的語言。參閱  <a href="mlang.html#:language">:language</a> 。


自 己 動 手 翻 譯 消 息

如果翻譯的消息沒有包括你的語言，你也可以自己寫。你得先拿到 Vim 的源代碼和 GNU
gettext 軟件包。在解壓縮了源代碼後，先讀一下 src/po/README.txt。那裡有詳細的指
導。
   翻譯本身不是很難的，你不一定要是一個程序員。當然，你必須懂英語和你要翻譯成
的語言。
   當你對你的翻譯滿意的時候，可以考慮和其它人共享。上載到 vim-online
(http://vim.sf.net) 或者 e-mail 給 Vim 的維護者 Vim &lt;maintainer@vim.org&gt;。
或者兩者都做。

</pre><hr class="doubleline" /><pre>
<h4><b class="vimtag"> <a name="45.2">45.2</a> </b>  菜單所用語言</h4>
缺省情況下菜單是英語的。要使用你自己的語言，首先它們得被翻譯過。通常情況下菜單
使用的語言會自動被設置成你所用的語言，就像消息一樣。你什麼也不用做。但是如果
Vim 不包括你所用語言的菜單的翻譯就不行了。
   假設你在德國，使用的語言被設為德語。但你更願意在菜單中看到 "File" 而非
"Datei"。你可以這樣將菜單語言換回英語: 
<code class="example"></code>
<code class="example">        :set langmenu=none</code>
<code class="example"></code>
也可以指定某一語言: 
<code class="example"></code>
<code class="example">        :set langmenu=nl_NL.ISO_8859-1</code>
<code class="example"></code>
和上面一樣 "-" 和 "_" 是有區別的。然而，大小寫在這裡可以不分。
   <a href="options.html#'langmenu'">'langmenu'</a> 選項必須在菜單被加載前設置才有效。一旦菜單已經被顯示了，再改變其
值就不會直接生效了。因此，你需要把設置 <a href="options.html#'langmenu'">'langmenu'</a> 的命令放在 vimrc 文件裡。
   如果你實在想在 Vim 運行當中改變菜單所用的語言，你可以這樣做: 
<code class="example"></code>
<code class="example">        :source $VIMRUNTIME/delmenu.vim</code>
<code class="example">        :set langmenu=de_DE.ISO_8859-1</code>
<code class="example">        :source $VIMRUNTIME/menu.vim</code>
<code class="example"></code>
這樣有一個缺陷: 所有你自己定義的菜單都不見了。你還得必須重新定義它們。


自 己 動 手 翻 譯 菜 單

在下面這個目錄可以找到那些已有的菜單翻譯:

<code class="section">        $VIMRUNTIME/lang </code>

翻譯文件被稱為 menu_<code class="special">{language}</code>.vim。如果找不到你想使用的語言的翻譯，你可以自行
翻譯。最簡單的辦法就是拷貝現存的語言文件並在其基礎上做改動。
   先用 ":language" 命令找出你現在使用的語言的名稱。就用這個名稱，但名字的所有
字母要小寫。將這個文件拷貝到你自己的運行時目錄。例如，在 Unix 系統上你應該: 
<code class="example"></code>
<code class="example">        :!cp $VIMRUNTIME/lang/menu_ko_kr.euckr.vim ~/.vim/lang/menu_nl_be.iso_8859-1.vim</code>
<code class="example"></code>
你會在 "$VIMRUNTIME/lang/README.txt" 文件中找到與翻譯相關的更多提示。

</pre><hr class="doubleline" /><pre>
<h4><b class="vimtag"> <a name="45.3">45.3</a> </b>  使用其它編碼</h4>
Vim 猜你所要編輯的文件編碼和你所用的語言相一致。對於許多歐洲語言而言，編碼是
"latin1"。那麼每個字節是一個字符。一共可能有 256 個不同的字符。而對於亞洲語言
這就遠遠不夠了。這些語言大多使用雙字節編碼，從而提供超過一萬個可能的字符。即使
如此，如果一篇文本中包括數種語言的文字，這樣還是不夠。Unicode 就是來解決這個問
題的。其設計允許它包括多種語言中全部的常用字符。它被稱為 "替代所有其它編碼的超
級編碼格式"。但它的使用還不很廣泛。
   幸運的是，Vim 對這三種編碼方式都支持，並且有條件的支持使用與系統環境語言不
一致的文本編碼。
   當你的系統語言與你所編輯文件用的編碼一致時，缺省設定應該沒有問題。所以你什
麼也不用擔心。下面的敘述只是當你想編輯不同的語言時才有關係。

        <code class="note">備註</code>:
        只有對不同編碼格式的支持被編譯進 Vim 時這些才有效。檢查一下看看
        ":version" 命令的輸出。如果包括 "+multi_byte" 就沒有問題，如果你看到
        "-multi_byte" 那你就得找另外一個 Vim。


在 GUI 上 使 用 UNICODE

Unicode 一個很方便的特性就是它可以與其它編碼格式相會轉換而不丟失信息。當你使
Vim 在內部使用 Unicode，你將可以用任何編碼編輯文件。
   不過，支持 Unicode 的系統還是比較有限的。因此可能你的語言不使用 Unicode。你
得告訴 Vim 你希望使用 Unicode，然後在解決與系統其它部分交互的問題。
   我們來啟動 GUI 版本的 Vim，這樣我們就可以顯示 Unicode 字符。這樣就行了: 
<code class="example"></code>
<code class="example">        :set encoding=utf-8</code>
<code class="example">        :set guifont=-misc-fixed-medium-r-normal--18-120-100-100-c-90-iso10646-1</code>
<code class="example"></code>
<a href="options.html#'encoding'">'encoding'</a> 選項告訴 Vim 你所用的字符的編碼。該選項適用於緩衝區的文本 (你正在編
輯的文件)，寄存器，Vim 腳本文件等等。你可以把 <a href="options.html#'encoding'">'encoding'</a> 選項當作是對 Vim 內部
運行機制的設定。
   上例假設你的系統安裝了指定的字體。例子中的字體名是用於 X-Window 系統的。這
種字體是包括在一個用於增強 xterm 的軟件包中的。如果你沒有這種字體，你可以在這
裡找到:

<code class="section">        http://www.cl.cam.ac.uk/~mgk25/download/ucs-fonts.tar.gz </code>

對於 MS-Windows，一些字體包含了一些有限的 Unicode 字符。試一下 "Courier New"
字體。你可以通過 Edit/Select Font... 菜單來選擇幾種字體試試。但是你只能使用定
寬的字體。例如: 
<code class="example"></code>
<code class="example">        :set guifont=courier_new:h12</code>
<code class="example"></code>
如果不行的話，試著找個字體包。你可以在下面這個地址找到，如果 Microsoft 沒把它
移走的話 (<code class="vim">譯者注</code>: 已經不能用了):

<code class="section">        http://www.microsoft.com/typography/fonts/default.aspx </code>

現在你已經通知了 Vim 在內部使用 Unicode 並用一種 Unicode 字體顯示文本。然而，
Vim 接收到的輸入字符依然來自原來語言的編碼字符。這些字符必須被轉換成 Unicode。
你可以通過 <a href="options.html#'termencoding'">'termencoding'</a> 選項值來通知 Vim 要轉換的語言。像這樣: 
<code class="example"></code>
<code class="example">        :let &amp;termencoding = &amp;encoding</code>
<code class="example">        :set encoding=utf-8</code>
<code class="example"></code>
這樣就在 <a href="options.html#'encoding'">'encoding'</a> 賦值為 utf-8 之前把 <a href="options.html#'encoding'">'encoding'</a> 的舊值賦給 <a href="options.html#'termencoding'">'termencoding'</a>。
你得自己試試這個辦法在你的系統上行不行得通。當你使用一個為亞洲語言專門設計的輸
入法，同時又想編輯 Unicode 文本，這個辦法應該工作的很好。


在 UNICODE 終 端 內 使 用 UNICODE

也有直接支持 Unicode 的終端。XFree86 自帶的標準 xterm 就是其中之一。我們就用它
作為例子。
   首先，Unicode 支持要被編譯進 xterm。參閱  <a href="mbyte.html#UTF8-xterm">UTF8-xterm</a> 。
   用 "-u8" 參數啟動 xterm。你可能還需要指定一個字體。例如: 
<code class="example"></code>
<code class="example">   xterm -u8 -fn -misc-fixed-medium-r-normal--18-120-100-100-c-90-iso10646-1</code>
<code class="example"></code>
現在你就可以在終端內運行 Vim 了。像前面一樣將 <a href="options.html#'encoding'">'encoding'</a> 設定為 "utf-8"。這樣
就行了。


在 普 通 終 端 裡 使 用 UNICODE

假定你希望編輯 Unicode 文件，但是手頭又沒有一個支持 Unicode 的終端。你還是可以
用 Vim 這樣做，但是那些終端不支持的字符就不能被正確的顯示了。文本的編排格式會
被保留。 
<code class="example"></code>
<code class="example">        :let &amp;termencoding = &amp;encoding</code>
<code class="example">        :set encoding=utf-8</code>
<code class="example"></code>
這和 GUI 的那個例子一樣。但內部工作機制不同: Vim 會把顯示的字符轉換後再送給終
端程序。這樣屏幕就不會顯示一堆毫無意義的字符。
   這需要 <a href="options.html#'termencoding'">'termencoding'</a> 和 <a href="options.html#'encoding'">'encoding'</a> 之間的轉換。Vim 會自己處理 latin1 和
Unicode 之間的轉化。其它的轉換需要編譯進來  <a href="various.html#+iconv">+iconv</a>  特性。
   試著編輯一個含有 Unicode 的文件。你會<code class="note">注意</code>到 Vim 會在那些無法顯示的字符處顯
示問號 (或下劃線或者其它什麼)。將光標移動到問號的地方並使用下面的命令: 
<code class="example"></code>
<code class="example">        ga</code>
<code class="example"></code>
Vim 會顯示該字符的代碼。這樣你就會知道那個字符大概是什麼。你可以去查 Unicode
表。如果你有很多很多時間的話，你甚至可以這樣來閱讀一個文件的內容。

        <code class="note">備註</code>:
        因為 Vim 對所有的文本都使用 <a href="options.html#'encoding'">'encoding'</a> 選項。改變該選項的值會使所有的
        非 ASCII 碼字符無效。你在使用寄存器和 <a href="options.html#'viminfo'">'viminfo'</a> 文件 (例如，一個被存儲
        的查找模式) 時就會<code class="note">注意</code>到了。建議在 vimrc 文件裡設置 <a href="options.html#'encoding'">'encoding'</a> 選項，
        然後就別再碰它。

</pre><hr class="doubleline" /><pre>
<h4><b class="vimtag"> <a name="45.4">45.4</a> </b>  編輯其它編碼的文件</h4>
假定你已經配置 Vim 使用 Unicode 了，你現在想編輯一個 16 位 Unicode 的文件。聽
起來很簡單，是嗎？事實上，Vim 在內部使用 utf-8 編碼，所以 16 為的編碼必須被轉
換。因為存在一個字符集 (Unicode) 和編碼格式 (utf-8 或 16 位) 的差別。
   Vim 會試著用 <a href="options.html#'fileencodings'">'fileencodings'</a> 選項中的編碼名稱檢測你在編輯哪種文件。當使用
Unicode 時，缺省的選項值是: "ucs-bom,utf-8,latin1"。也就是說 Vim 會檢查編輯的
文件看看是下面的編碼之一:

        ucs-bom         文件必須以 Byte Order Mark (BOM) 開始。可以檢測 16
                        位，32 位和 utf-8 Unicode 編碼。
        utf-8           utf-8 Unicode。如果有在 utf-8 中非法的字節序列，此設定
                        將被拒絕。
        latin1          保證有效的經典 8 位編碼。

當你開始編輯一個 16 位的 Unicode 編碼，而該文件有 BOM 時，Vim 會檢測到這些並在
讀取文件時將其轉換為 utf-8 編碼。<a href="options.html#'fileencoding'">'fileencoding'</a> 選項 (後面沒有 s) 被設為檢測到
的值，在本情況下是 "utf-16le"。表示是 Unicode，雙字節以及 little-endian (高位
字節在後) 的編碼。這樣的文件格式在 MS-Windows 上很常用 (例如，註冊表文件)。
   當寫入文件時，Vim 會比較 <a href="options.html#'fileencoding'">'fileencoding'</a> 和 <a href="options.html#'encoding'">'encoding'</a> 的值。如果它們的值不
同，文本會被轉換。
   如果 <a href="options.html#'fileencoding'">'fileencoding'</a> 的值是空的，意味著不作任何轉換。這樣文本就會被以
<a href="options.html#'encoding'">'encoding'</a> 的值來編碼。

如果缺省的 <a href="options.html#'fileencodings'">'fileencodings'</a> 值不行的話，你可以將其設成你希望 Vim 嘗試使用的編
碼。只有當一個值無效時下一個才會被使用。將 "latin1" 放到第一位是不行的，因為它
永遠都不會是無效的。舉個例子，要在文件沒有 BOM 也不是 utf-8 編碼的時候缺省設為
簡體中文編碼 (Unix 和 Windows 上都可以用 chinese 作為編碼名): 
<code class="example"></code>
<code class="example">        :set fileencodings=ucs-bom,utf-8,chinese</code>
<code class="example"></code>
 <a href="mbyte.html#encoding-values">encoding-values</a>  有建議值。其它的值也可能有效。這取決於系統提供的轉換功能。


強 制 編 碼

如果編碼的自動檢測對你不起作用的話，你就得告訴 Vim 你要編輯的文件是什麼編碼。
例如: 
<code class="example"></code>
<code class="example">        :edit ++enc=koi8-r russian.txt</code>
<code class="example"></code>
"++enc" 部分指定編輯該文件時應該使用的編碼。Vim 會把指定的編碼 (在這是俄語) 轉
換為 <a href="options.html#'encoding'">'encoding'</a>。<a href="options.html#'fileencoding'">'fileencoding'</a> 也會被設為指定的編碼，這樣當寫入文件時就會發生
編碼的反轉換。
   在寫入文件時也可以用到一樣的參數。這樣你事實上可以用 Vim 來轉換一個文件。例
如: 
<code class="example"></code>
<code class="example">        :write ++enc=utf-8 russian.txt</code>

        <code class="note">備註</code>:
        轉換可能導致字符丟失。在 Unicode 和其他編碼之間的相互轉換基本上不會有
        這個麻煩，除非你有非法字符。當文件包括多於一種語言的字符時，從 Unicode
        轉換為其它編碼很可能會丟失信息。

</pre><hr class="doubleline" /><pre>
<h4><b class="vimtag"> <a name="45.5">45.5</a> </b>  文本錄入</h4>
計算機鍵盤只有那麼多鍵。有些語言包括幾千個字符。Unicode 有超過十萬。那你怎麼才
能輸入這些字符呢？
   首先，如果你不需要很多的特殊字符，你可以用二合字母。這已經在  <a href="usr_24.html#24.9">24.9</a>  講述過
了。
   當你使用一種有很多字符的語言，你的鍵盤應付不了，你就得使用一種輸入法 (IM)。
這需要學習如何把輸入的鍵變成要輸入的字符。你所用的系統很可能已經提供了輸入法。
Vim 應該可以很好地與其合作。更多的細節請參閱  <a href="mbyte.html#mbyte-XIM">mbyte-XIM</a>  (X-Windows) 和
 <a href="mbyte.html#mbyte-IME">mbyte-IME</a>  (MS-Windows)。


鍵 盤 映 射 表

對於某些語言來說字符集可能不同但是可用的字符數目和拉丁字符集差不多。這樣就有可
能在字符和鍵盤之間定義一個一對一的對應。Vim 用鍵盤映射表來解決這個問題。
   假定你想輸入希伯來語，你可以這樣載入希伯來語的鍵盤映射表: 
<code class="example"></code>
<code class="example">        :set keymap=hebrew</code>
<code class="example"></code>
Vim 會為你找到一個鍵盤映射表文件。這取決於 <code class="badlink">'encodings'</code> 選項的值。如果找不到相
應的文件，你會得到一個錯誤信息。

現在你就可以在插入方式下輸入希伯來語了。普通模式下，當你鍵入 ":"，Vim 會自動切
換到英語。你也可以用下面這個命令來在希伯來語和英語之間切換: 
<code class="example"></code>
<code class="example">        CTRL-^</code>
<code class="example"></code>
它只在插入模式和命令行模式下才有效。在普通模式下會產生完全不同的效果 (跳轉到輪
換文件)。
   如果你打開 <a href="options.html#'showmode'">'showmode'</a> 選項的話，鍵盤映射表的使用情況會在狀態信息裡指出。在
GUI 上，Vim 會使用不同的光標顏色來指明映射表的使用情況。
   你可以用 <a href="options.html#'iminsert'">'iminsert'</a> 和 <a href="options.html#'imsearch'">'imsearch'</a> 選項來改變鍵盤映射表的用法。

要查看鍵映射的列表，用這個命令: 
<code class="example"></code>
<code class="example">        :lmap</code>
<code class="example"></code>
要查看系統有哪些鍵盤映射表文件，在 GUI 上你可以用 Edit/Keymap 菜單。否則你可以
用: 
<code class="example"></code>
<code class="example">        :echo globpath(&amp;rtp, "keymap/*.vim")</code>
<code class="example"></code>
(<code class="vim">譯者注</code>: 中文用戶可以試試 pinyin 映射表，可用來輸入帶四聲的韻母。)

自 定 義 鍵 盤 映 射 表

你也可以創建你自己的鍵盤映射表。不是很難。從一個和你要使用語言類似的映射表開
始。將其拷貝到你的運行時目錄裡的 "keymap" 子目錄。例如，在 Unix 上，你可以用
"~/.vim/keymap" 目錄。
   鍵盤映射表的文件名必須遵守下面的規則:

<code class="section">        keymap/<code class="special">{name}</code>.vim </code>
或
<code class="section">        keymap/<code class="special">{name}</code>_<code class="special">{encoding}</code>.vim </code>

<code class="special">{name}</code> 是鍵盤映射表的名字。選擇一個容易識別，又和系統中其它映射表不同的名字
(除非你希望替換一個現存的映射表)。名字不能包括下劃線。使用的編碼名是可選的。例
如:

<code class="section">        keymap/hebrew.vim </code>
<code class="section">        keymap/hebrew_utf-8.vim </code>

文件的內容應該很容易理解。看看隨 Vim 一起發佈的幾個鍵盤映射表就行了。更詳細
的，請參閱  <a href="mbyte.html#mbyte-keymap">mbyte-keymap</a> 。


最 後 的 辦 法

如果其它的方法都行不通，你可以用 <code class="keystroke">CTRL-V</code> 來輸入任何字符:

<code class="section">        編碼       鍵入                 範圍 </code>
        8-bit      <code class="keystroke">CTRL-V</code> 123           十進制 0-255
        8-bit      <code class="keystroke">CTRL-V</code> x a1          十六進制 00-ff
        16-bit     <code class="keystroke">CTRL-V</code> u 013b        十六進制 0000-ffff
        31-bit     <code class="keystroke">CTRL-V</code> U 001303a4    十六進制 00000000-7fffffff

<code class="note">注意</code>不要輸入空格。更詳細的，參閱  <a href="insert.html#i_CTRL-V_digit">i_CTRL-V_digit</a> 。

</pre><hr class="doubleline" /><pre>
<h4></h4>下一章:  <a href="usr_90.html#usr_90.txt">usr_90.txt</a>   安裝 Vim

版權: 參見  <a href="usr_01.html#manual-copyright">manual-copyright</a>   vim:tw=78:ts=8:ft=help:norl:
</pre>
<p><i>Generated by vim2html</i></p>
</div>
</body>
</html>
