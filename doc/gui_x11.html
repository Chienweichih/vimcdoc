<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>VIM: gui_x11</title>
<link rel="stylesheet" href="vim-stylesheet.css" type="text/css">
</head>
<body>
<div id=banner>
<a href="help.html">幫助總覽</a> &middot;
<a href="quickref.html">快速參考</a> &middot;
<a href="index.html">命令索引</a> &middot;
<a href="usr_toc.html">用戶手冊</a> &middot;
<a href="help.html#reference_toc">參考手冊</a>
</div>

<div id=outer>
<h2>gui_x11</h2>
<pre>
<b class="vimtag"> <a name="gui_x11.txt">gui_x11.txt</a> </b>   For Vim version 8.0.  最近更新: 2017年7月


                  <code class="vim">VIM 參考手冊    by Bram Moolenaar</code>
                      <code class="vim">譯者</code>: Zimin&lt;cranecai@users.sf.net&gt;，tocer
                      http://vimcdoc.sf.net


Vim 的圖形用戶界面                                      <b class="vimtag"> <a name="gui-x11">gui-x11</a> </b> <b class="vimtag"> <a name="GUI-X11">GUI-X11</a> </b>
                                                        <b class="vimtag"> <a name="Athena">Athena</a> </b> <b class="vimtag"> <a name="Motif">Motif</a> </b>
1. 啟動 X11 GUI                  <a href="gui_x11.html#gui-x11-start">gui-x11-start</a> 
2. GUI 資源                      <a href="gui_x11.html#gui-resources">gui-resources</a> 
3. Shell 命令行                  <a href="gui_x11.html#gui-pty">gui-pty</a> 
4. 雜項                          <a href="gui_x11.html#gui-x11-various">gui-x11-various</a> 
5. GTK 版本                      <a href="gui_x11.html#gui-gtk">gui-gtk</a> 
6. GNOME 版本                    <a href="gui_x11.html#gui-gnome">gui-gnome</a> 
7. KDE 版本                      <a href="gui_x11.html#gui-kde">gui-kde</a> 
8. 編譯                          <a href="gui_x11.html#gui-x11-compiling">gui-x11-compiling</a> 
9. X11 選擇機制                  <a href="gui_x11.html#x11-selection">x11-selection</a> 

其他相關文章:
 <a href="gui.html#gui.txt">gui.txt</a>        所有的 GUI 版本的通用功能

<code class="notvi">{Vi 沒有這裡提到的任何命令}</code>

</pre><hr class="doubleline" /><pre>
<h4>1. 啟動 X11 GUI                                         <b class="vimtag"> <a name="gui-x11-start">gui-x11-start</a> </b> <b class="vimtag"> <a name="E665">E665</a> </b></h4>
你可以通過以下兩種方式之一來啟動 GUI 版本的 Vim:
    gvim <code class="special">[options]</code> [files...]
    vim -g <code class="special">[options]</code> [files...]

所以，如果你將可執行文件取名為 "gvim"，或者做一個叫 "gvim" 的鏈接，GUI 版本的
Vim 就會被自動運行。在 "gvim" 後也可以添加字符，如 "gvim-5"。

通過以下命令之一，你也可以從終端版本進入 GUI:
        :gui <code class="special">[++opt]</code> <code class="special">[+cmd]</code> [-f|-b] [files...]                  <b class="vimtag"> <a name=":gu">:gu</a> </b> <b class="vimtag"> <a name=":gui">:gui</a> </b>
        :gvim <code class="special">[++opt]</code> <code class="special">[+cmd]</code> [-f|-b] [files...]                 <b class="vimtag"> <a name=":gv">:gv</a> </b> <b class="vimtag"> <a name=":gvim">:gvim</a> </b>
"-f" 參數在前台運行 Vim。
"-b" 參數在後台運行 Vim (默認)。
參考  <a href="editing.html#++opt">++opt</a>  和  <a href="editing.html#+cmd">+cmd</a> 。

                                                        <b class="vimtag"> <a name="gui-fork">gui-fork</a> </b>

當 GUI 啟動時，它調用 fork() 並退出當前進程。當 gvim 從外殼啟動時，這將允許外
殼接受其後更多的命令。如果你不想這樣 (例如，當一郵件程序要等待運行的 gvim 退出
時)，可以用 "gvim -f"，"vim -gf" 或 ":gui -f" 來啟動。不要用 "vim -fg"，因為
"-fg" 表示前台顏色。

當用 "gvim -f" 啟動，然後使用 ":gui"，Vim 將在前台運行。參數 "-f" 將被記住。要
強迫 Vim 在後台運行，使用 ":gui -b"。

"gvim --nofork" 和 "gvim -f" 的效果一樣。
                                                                <b class="vimtag"> <a name="E851">E851</a> </b> <b class="vimtag"> <a name="E852">E852</a> </b>
GUI 方式啟動失敗時，Vim 仍會繼續嘗試以終端方式運行。

如果你想一直在前台運行 GUI，給 <a href="options.html#'guioptions'">'guioptions'</a> 加入 'f' 標誌位。 <a href="starting.html#-f">-f</a> 。

</pre><hr class="doubleline" /><pre>
<h4>2. GUI 資源                             <b class="vimtag"> <a name="gui-resources">gui-resources</a> </b> <b class="vimtag"> <a name=".Xdefaults">.Xdefaults</a> </b></h4>
如果使用 Motif 或者 Athena 版本的 GUI (不是 KDE、GTK+ 或 Win32 版本)，有很多 X
資源可以用。你應該使用類名 Vim 來設置。它們被列如下:

<code class="section">    資源名稱            意義            </code>

    reverseVideo        布爾型: 是不是翻轉視頻？
    background          背景色。
    foreground          普通文字顏色。
    scrollBackground    滾動條槽的顏色。
    scrollForeground    滾動條滑塊和箭頭顏色。
    menuBackground      菜單背景色。
    menuForeground      菜單前景色。
    tooltipForeground   工具和氣泡提示前景色。
    tooltipBackground   工具和氣泡提示背景色。

    font                普通文字的字體名稱。
    boldFont            加粗文字的字體名稱。
    italicFont          斜體文字的字體名稱。
    boldItalicFont      加粗、斜體文字的字體名稱。
    menuFont            菜單字體名稱。編譯時沒有  <a href="various.html#+xfontset">+xfontset</a>  特性時使用
    menuFontSet         菜單字體集名稱。編譯時有  <a href="various.html#+xfontset">+xfontset</a>  特性時使用
    tooltipFont         工具和氣泡提示的字體名稱。
                        當編譯時帶有  <a href="various.html#+xfontset">+xfontset</a>  特性時，使用字體集名稱。

    geometry            啟動時的 gvim 窗口大小 (默認和啟動它的終端窗口一樣)。
    scrollbarWidth      滾動條寬度。
    borderWidth         文本區域周圍邊框的寬度。
    menuHeight          菜單欄高度 (僅對 Athena 有效)。

只有用戶通過上述資源指定了粗體、斜體、斜粗體文本的特定字體時，Vim 才會使用它。
Vim 不會根據正常字體來推測應該使用的字體。

<code class="note">備註</code>: 顏色也可用 ":highlight" 命令設置。可以使用這幾個組: "Normal"，"Menu"，
"Tooltip"，"Scrollbar"。例如: 
<code class="example">        :highlight Menu guibg=lightblue</code>
<code class="example">        :highlight Tooltip guibg=yellow</code>
<code class="example">        :highlight Scrollbar guibg=lightblue guifg=blue</code>
<code class="example">        :highlight Normal guibg=grey90</code>

                                                        <b class="vimtag"> <a name="font-sizes">font-sizes</a> </b>
<code class="note">備註</code>: 所有的字體 (除了菜單和工具按鈕提示) 必須是同樣大小！！！如果你不這樣做，
文字將無法顯示或混成一團。Vim 不檢查字體大小。必須一樣的是以屏幕像素計算的尺
寸。<code class="note">注意</code>有些字體有同樣的 "點" 數但是像素尺寸卻不同！另外，與字體位置相關的屬性
擺放 (ascent 和 descent) 也必須相同。你可以用 "xlsfonts -l <code class="special">{fontname}</code>" 核實。

如果上述任何一個資源其後用 Vim 命令設置，例如用 ":set guifont=Screen15"，X 資
源的設置將被覆蓋 (目前唯一支持的選項是 <a href="options.html#'guifont'">'guifont'</a>)。

這裡有個例子，你可以考慮加入到 ~/.Xdefaults 文件中: 
<code class="example"></code>
<code class="example">        Vim*useSchemes:                 all</code>
<code class="example">        Vim*sgiMode:                    true</code>
<code class="example">        Vim*useEnhancedFSB:             true</code>
<code class="example">        Vim.foreground:                 Black</code>
<code class="example">        Vim.background:                 Wheat</code>
<code class="example">        Vim*fontList:                   7x13</code>
<code class="example"></code>
前三個是 Silicon Graphics 機器的標準資源，這將使 Motif 應用效果更好，強烈推
薦！

"Vim*fontList" 設置 Motif 的菜單字體。例如: 
<code class="example">        Vim*menuBar*fontList:        -*-courier-medium-r-*-*-10-*-*-*-*-*-*-*</code>
在 Athena 上: 
<code class="example">        Vim*menuBar*SmeBSB*font:     -*-courier-medium-r-*-*-10-*-*-*-*-*-*-*</code>
<code class="example">        Vim*menuBar*MenuButton*font: -*-courier-medium-r-*-*-10-*-*-*-*-*-*-*</code>

<code class="note">備註</code>: 一個更通用，更完善，可同時在 Motif 和 Athena 使用的設置字體的方法: 
<code class="example">        Vim.menuFont:        -*-courier-medium-r-*-*-10-*-*-*-*-*-*-*</code>
或者，當編譯進  <a href="various.html#+xfontset">+xfontset</a>  特性時: 
<code class="example">        Vim.menuFontSet:     -*-courier-medium-r-*-*-10-*-*-*-*-*-*-*</code>
<code class="example"></code>
用 "Vim.geometry" 替代 "Vim*geometry"。不然，菜單將被破壞。

如果出現 "Cannot allocate colormap entry for "gray60" 的錯誤信息，試試在你的
Vim 資源中加入這些 (改變成你喜歡的顏色): 
<code class="example"></code>
<code class="example">        Vim*scrollBackground:           Black</code>
<code class="example">        Vim*scrollForeground:           Blue</code>
<code class="example"></code>
資源也可用 Vim 參數來設定:

<code class="section">    參數                含義    </code>
                                                        <b class="vimtag"> <a name="-gui">-gui</a> </b>
   -display <code class="special">{display}</code>   在 <code class="special">{display}</code> 上運行 Vim         <b class="vimtag"> <a name="-display">-display</a> </b>
   -iconic              圖標化運行 Vim                  <b class="vimtag"> <a name="-iconic">-iconic</a> </b>
   -background <code class="special">{color}</code>  背景使用 <code class="special">{color}</code>                <b class="vimtag"> <a name="-background">-background</a> </b>
   -bg <code class="special">{color}</code>          同上                            <b class="vimtag"> <a name="-bg">-bg</a> </b>
   -foreground <code class="special">{color}</code>  普通文字使用 <code class="special">{color}</code>            <b class="vimtag"> <a name="-foreground">-foreground</a> </b>
   -fg <code class="special">{color}</code>          同上                            <b class="vimtag"> <a name="-fg">-fg</a> </b>
   -ul <code class="special">{color}</code>          同上                            <b class="vimtag"> <a name="-ul">-ul</a> </b>
   -font <code class="special">{font}</code>         普通文字使用 <code class="special">{font}</code>             <b class="vimtag"> <a name="-font">-font</a> </b>
   -fn <code class="special">{font}</code>           同上                            <b class="vimtag"> <a name="-fn">-fn</a> </b>
   -boldfont <code class="special">{font}</code>     粗體字使用 <code class="special">{font}</code>               <b class="vimtag"> <a name="-boldfont">-boldfont</a> </b>
   -italicfont <code class="special">{font}</code>   斜體字使用 <code class="special">{font}</code>               <b class="vimtag"> <a name="-italicfont">-italicfont</a> </b>
   -menufont <code class="special">{font}</code>     菜單項使用 <code class="special">{font}</code>               <b class="vimtag"> <a name="-menufont">-menufont</a> </b>
   -menufontset <code class="special">{fontset}</code> 菜單項使用 <code class="special">{fontset}</code>          <b class="vimtag"> <a name="-menufontset">-menufontset</a> </b>
   -mf <code class="special">{font}</code>           同上                            <b class="vimtag"> <a name="-mf">-mf</a> </b>
   -geometry <code class="special">{geom}</code>     初始大小設為 <code class="special">{geom}</code>             <b class="vimtag"> <a name="-geometry">-geometry</a> </b>
   -geom <code class="special">{geom}</code>         同上，參見  <a href="gui_x11.html#-geometry-example">-geometry-example</a>   <b class="vimtag"> <a name="-geom">-geom</a> </b>
   -borderwidth <code class="special">{width}</code> 使用寬度 <code class="special">{width}</code>                <b class="vimtag"> <a name="-borderwidth">-borderwidth</a> </b>
   -bw <code class="special">{width}</code>          同上                            <b class="vimtag"> <a name="-bw">-bw</a> </b>
                                                        <b class="vimtag"> <a name="-scrollbarwidth">-scrollbarwidth</a> </b>
   -scrollbarwidth <code class="special">{width}</code>      滾動條寬度使用 <code class="special">{width}</code>
   -sw <code class="special">{width}</code>          同上                            <b class="vimtag"> <a name="-sw">-sw</a> </b>
   -menuheight <code class="special">{height}</code> 菜單欄高度使用 <code class="special">{height}</code>         <b class="vimtag"> <a name="-menuheight">-menuheight</a> </b>
   -mh <code class="special">{height}</code>         同上                            <b class="vimtag"> <a name="-mh">-mh</a> </b>
                        <code class="note">備註</code>:Motif 忽略此值，那裡自動計算高度來使菜單合身
   -reverse             使用反轉視頻                    <b class="vimtag"> <a name="-reverse">-reverse</a> </b>
   -rv                  同上                            <b class="vimtag"> <a name="-rv">-rv</a> </b>
   +reverse             不使用反轉視頻                  <b class="vimtag"> <a name="-+reverse">-+reverse</a> </b>
   +rv                  同上                            <b class="vimtag"> <a name="-+rv">-+rv</a> </b>
   -xrm <code class="special">{resource}</code>      設定指定資源                    <b class="vimtag"> <a name="-xrm">-xrm</a> </b>

<code class="note">注意</code> 有關反轉視頻的<code class="note">注意</code>事項: Vim 檢查最終效果是在暗的背景配亮文字。原因是有些
版本的 X11 交換顏色，有些不這麼做。以下兩個例子都是設定了黃色文字、藍色背景:
    gvim -fg Yellow -bg Blue -reverse
    gvim -bg Yellow -fg Blue -reverse

                                                        <b class="vimtag"> <a name="-geometry-example">-geometry-example</a> </b>
一個尺寸的例子: 
<code class="example">        gvim -geometry 80x63+8+100</code>
這個命令創建一個自左 8 像素，自頂 100 像素的一個 80 列寬，63 行高的窗口。

</pre><hr class="doubleline" /><pre>
<h4>3. Shell 命令行                                         <b class="vimtag"> <a name="gui-pty">gui-pty</a> </b></h4>
警 告: 從 GUI 中執行外部命令並不總是可行的。像 "ls"、"grep"、 "make" 這樣的普
通命令一般都是有效的。那些需要智能終端的命令如，"less"、"ispell" 就未必了。有
些甚至可能使 GUI 掛起，你從而必須從另外個終端裡 kill 它。所以要小心。

有兩種方式可以用外殼命令做 I/O 操作: 管道和偽終端。默認是偽終端，它可以很好地
工作在許多系統上。

不幸的是，偽終端的實現在每個 Unix 系統上是不同的。並且，一些系統上需要 root 權
限。為了避免這類問題，可以在編輯文件之前先試一下。做好 kill 那個命令或 Vim 的
準備。如 ":r !cat" 這樣的命令會導致掛起的。

如果你的無法使用偽終端，可以復位 <a href="options.html#'guipty'">'guipty'</a> 選項: 
<code class="example"></code>
<code class="example">        :set noguipty</code>
<code class="example"></code>
管道可用在任一 Unix 系統上，但也有缺點:
- 一些外殼命令會<code class="note">注意</code>到管道的存在，而作出不同的操作。如 ":!ls"，將在一欄裡列文
  件。
- ":sh" 命令將不會顯示提示符，但可以部分工作。
- 當使用 ":make" 時，很可能無法用 <code class="keystroke">CTRL-C</code> 中斷。

當外部命令運行時，事先鍵入的內容經常丟失。這在管道和偽終端中，都有發生。這是個
已知的問題，但看上去無法解決 (至少很困難)。

                                                        <b class="vimtag"> <a name="gui-pty-erase">gui-pty-erase</a> </b>
當你的刪除鍵工作不正常時，你應該修改 "~/.cshrc" 文件，或者你所用的外殼的等同文
件。例如，當你使用退格鍵來刪除字符時，反而產生了 "^H"，你可以添加以下內容到
"~/.cshrc" 中: 
<code class="example">        stty erase ^H</code>
^H 是 <code class="keystroke">CTRL-H</code>，要鍵入它，用 <code class="keystroke">CTRL-V</code> <code class="keystroke">CTRL-H</code>。

</pre><hr class="doubleline" /><pre>
<h4>4. 雜項                                                 <b class="vimtag"> <a name="gui-x11-various">gui-x11-various</a> </b></h4>
                                                        <b class="vimtag"> <a name="gui-x11-printing">gui-x11-printing</a> </b>
"File/Print" 僅僅發送當前的緩衝區內容到 "lpr"。沒有選項或其他東西。如果你需要
其它效果，可以定義你自己的打印命令。如: 
<code class="example"></code>
<code class="example">  :10amenu File.Print :w !lpr -Php3</code>
<code class="example">  :10vmenu File.Print :w !lpr -Php3</code>

                                                        <b class="vimtag"> <a name="X11-icon">X11-icon</a> </b>
默認的 Motif 或 Athena 版本的 Vim 使用黑白按鈕。在 $VIMRUNTIME/vim32x32.xpm 包
含一個彩色的 Vim 圖標。在 GTK+，這是內建的圖標。不幸的是，你該怎樣安裝它取決於
你的窗口管理器。你可以從 <a href="options.html#'guioptions'">'guioptions'</a> 除去 'i' 標誌，來除去黑白按鈕: 
<code class="example">  :set guioptions-=i</code>
<code class="example"></code>
如果你使用 fvwm* 系列窗口管理器，你只需要在 .fvwm2rc 配置文件中加入: 
<code class="example"></code>
<code class="example">  Style "vim"           Icon vim32x32.xpm</code>
<code class="example"></code>
要保證圖標文件的位置和窗口管理器 ImagePath 語句聲明中所指定的一致。要麼在
.fvwm2rc 修改圖標路徑，要麼將圖標放入以下預定義的任一目錄中: 
<code class="example"></code>
<code class="example">  ImagePath /usr/X11R6/include/X11/pixmaps:/usr/X11R6/include/X11/bitmaps</code>

<code class="note">備註</code>: 舊版本的 fvwm 使用 "IconPath" 而不是 "ImagePath"。

對於 CDE "dtwm" (Motif 的一個變體)，在 .Xdefaults 中加入這一行: 
<code class="example">   Dtwm*Vim*iconImage: /usr/local/share/vim/vim32x32.xpm</code>
<code class="example"></code>
在 "mwm" (Motif 窗口管理器) 該行應是: 
<code class="example">   Mwm*Vim*iconImage: /usr/local/share/vim/vim32x32.xpm</code>
<code class="example"></code>
X11 中可用的鼠標指針                                    <b class="vimtag"> <a name="X11_mouse_shapes">X11_mouse_shapes</a> </b>

當使用  <a href="options.html#'mouseshape'">'mouseshape'</a>  選項時，vim 進入各種模式時鼠標指針都會自動改變 (例如，在
插入或命令模式中)。目前可用的指針如下:

        arrow                   一個指向西北的箭頭
        beam                    像 I 的豎直條
        size                    一個指著上下的箭頭
        busy                    一個時間漏斗
        blank                   一個不可見的指針
        crosshair               一個瘦 "+" 符號
        hand1                   一個指向西北的暗手
        hand2                   一個指向西北的亮手
        pencil                  一支指向東南的筆
        question                帶問號的箭頭
        right_arrow             一個指向東南的箭頭
        up_arrow                一個指向上面的箭頭

另外，任何 X11 內建的鼠標指針都可以通過指定一個在 X11/cursorfont.h 中定義的整
數來使用。

如果使用一個在其它系統有效，而在 X11 中無效的名字，使用默認的 "arrow"。

</pre><hr class="doubleline" /><pre>
<h4>5. GTK 版本                                     <b class="vimtag"> <a name="gui-gtk">gui-gtk</a> </b> <b class="vimtag"> <a name="GTK+">GTK+</a> </b> <b class="vimtag"> <a name="GTK">GTK</a> </b> <b class="vimtag"> <a name="GTK3">GTK3</a> </b></h4>
GUI 的 GTK 版本的使用略有不同。

GTKˍ不ˍ使用傳統的 X 資源設置。所以，你的 ~/.Xdefaults 或 app-defaults 文件不
會被使用。
不支持許多傳統的 X 命令行參數。(例如，-bg，-fg 等)。支持的有:

<code class="section">    命令行參數              資源名稱            含義 </code>
    -fn  或  -font          .font               文字字體名稱
    -geom  或  -geometry    .geometry           gvim 窗口尺寸
    -rv  或  -reverse       *reverseVideo       白字黑底
    -display                                    使用顯示
    -fg -foreground <code class="special">{color}</code>                     前景色
    -bg -background <code class="special">{color}</code>                     背景色

要設置字體，參閱  <a href="options.html#'guifont'">'guifont'</a> 。對 GTK，也可以使用相應的菜單選項設置。

另外，也有 GTK 內部處理的命令行參數。要知道如何使用以下的參數，請查看 GTK 文
檔:
        --sync
        --gdk-debug
        --gdk-no-debug
        --no-xshm       (GTK+ 2 版本不使用)
        --xim-preedit   (GTK+ 2 版本不使用)
        --xim-status    (GTK+ 2 版本不使用)
        --gtk-debug
        --gtk-no-debug
        --g-fatal-warnings
        --gtk-module
        --display       (GTK+ 對應 -display 的選項；用法相同)
        --screen        (屏幕號；用於對 GTK+ 2.2 多屏幕支持。)

以下的參數在用到  <a href="various.html#+netbeans_intg">+netbeans_intg</a>  特性時被忽略:
        -xrm
        -mf

關於顏色，vim 的顏色設置 (用於語法高亮) 仍然和傳統的 Vim 方式一致。參考
 <a href="syntax.html#:highlight">:highlight</a> 。

如果你想設置其它的 gui 組件 (如，菜單欄，滾動條，等等) 的顏色，那些是 GTK 的特
別設置，你需要改動 gtkrc 之類的文件。至於如何改動，可參考 GTK 文檔。更多的信息
請參考 http://developer.gnome.org/doc/API/2.0/gtk/gtk-Resource-Files.html。

                                                        <b class="vimtag"> <a name="gtk-tooltip-colors">gtk-tooltip-colors</a> </b>
如，設定工具提示條為黑字亮黃色背景: 
<code class="example"></code>
<code class="example">        style "tooltips"</code>
<code class="example">        {</code>
<code class="example">                bg[NORMAL] = "#ffffcc"</code>
<code class="example">                fg[NORMAL] = "#000000"</code>
<code class="example">        }</code>
<code class="example"></code>
<code class="example">        widget "gtk-tooltips*"          style "tooltips"</code>
<code class="example"></code>
寫入文件 ~/.gtkrc，這些設置就會被 GTK+ 使用。對於 GTK+ 2 而言，可能要修改的文
件是 ~/.gtkrc-2.0。但各個發行版本不一樣。

GTK+ 3 上，要達成類似的效果，可在 $XDG_HOME_DIR/gtk-3.0/gtk.css (通常是
$HOME/.config/gtk-3.0/gtk.css) 中加入以下的 CSS 代碼:
 
<code class="example">        .tooltip {</code>
<code class="example">                background-color: #ffffcc;</code>
<code class="example">                color: #000000;</code>
<code class="example">        }</code>


使用 Vim 作為 GTK+ 的插件                               <b class="vimtag"> <a name="gui-gtk-socketid">gui-gtk-socketid</a> </b>

當 GTK+ 版本的 Vim 啟動時，它會創建自己的頂層窗口 (技術上，<code class="badlink">'GtkWindow'</code>)。GTK+
提供了用 GtkSocket 和 GtkPlug 組件 (widget) 嵌入的便利手段。如果一 GTK+ 應用程
序在它的一個窗口裡創建了一個 GtkSocket 組件，另外一個完全不同的 GTK+ 程序就可
以使用該 socket 的 ID 來建立一個在頂層的 GtkPlug 組件，從而將自己完全嵌入前一
個應用程序中。

如果你通過命令行參數 '--socketid' 傳給 Vim 一個十進制或十六進制的值，Vim 將使
用該值來創建一個 GtkPlug 組件，而不是普通的 GtkWindow。這將使 Vim 作為 GTK 的
插件來運行。

這其實是一個編程的接口，必須有專門的應用程序支持 (該程序必須正確地啟動 Vim)。
有關更多的 GTK+ socket 信息，參考 http://www.gtk.org/api/

<code class="note">備註</code>: 這個功能需要最新的 GTK 版本。GTK 1.2.10 仍然有小問題。socket 特性還沒有
在 GTK+ 2 下測試過，歡迎毛遂自薦。

</pre><hr class="doubleline" /><pre>
<h4>6. GNOME 版本                                   <b class="vimtag"> <a name="gui-gnome">gui-gnome</a> </b> <b class="vimtag"> <a name="Gnome">Gnome</a> </b> <b class="vimtag"> <a name="GNOME">GNOME</a> </b></h4>
Gnome GUI 就像 GTK 一樣工作。有關細節可以參考  <a href="gui_x11.html#GTK">GTK</a> 。但是程序的外觀有些不同，
而且 Gnome GUI 有一個很重要的特性是 GTK+ 沒有的: 和會話管理器的交互。
 <a href="gui_x11.html#gui-gnome-session">gui-gnome-session</a> 

以下是外觀上的不同之處:
- 使用 GNOME 對話框 (僅對 GNOME 1 而言)。GNOME 2 GUI 使用和 GTK+ 2 一樣的對話
  框。
- 使用 GNOME 錨接機制 (dock)，這使得工具欄、菜單欄可以移至不同的地方，而不是必
  須在頂部 (如，工具欄可以放在上下左右任何一處)。只有在 GNOME 2 中，保存它們的
  位置。
- 那意味著菜單欄和工具欄的句柄回來了！Yeah！並且重設網格尺寸又可以工作了。

在 configure (配置) 階段如果發現 GNOME 或者使用 --enable-gnome-check 參數，
GNOME 將被編譯進來。

<code class="note">注意</code>: GTK+ 3 GUI 版本不要用 --enable-gnome-check。上述的功能已經整合進了 GTK+
3。


GNOME 會話支持                          <b class="vimtag"> <a name="gui-gnome-session">gui-gnome-session</a> </b> <b class="vimtag"> <a name="gnome-session">gnome-session</a> </b>

如果在退出登錄時有任何改動過的緩衝區，Vim 會顯示一個確認窗口。單擊 <code class="special">[Cancel]</code> 會
終止退出的過程。否則當前的會話會被用  <a href="starting.html#:mksession">:mksession</a>  命令存入硬盤，並在下次登陸時
自動恢復。

GNOME 會話支持應該也對 KDE 會話管理器有效。如果你有在使用時遇到什麼問題的話，
請提交漏洞報告。

<code class="note">備註</code>: 會話的自動存儲完全是透明的。這樣避免了與你自己的會話文件，腳本和自動命令
的衝突。具體的細節如下:
- 會話文件被存儲於一個獨立的路徑 (通常是 $HOME/.gnome2)。
- <a href="options.html#'sessionoptions'">'sessionoptions'</a> 被忽略，Vim 會使用一些合適的，硬性規定的選項: 
<code class="example">        blank,curdir,folds,globals,help,options,tabpages,winsize</code>
- 在存儲時，內部變量  <a href="eval.html#v:this_session">v:this_session</a>  的值不會被改變。同時，當再次登錄時，該值
  會被恢復。

Vim 不會存儲 GUI 窗口的大小和位置，因為這是窗口管理器的職責。但是如果編譯了
GTK+ 2 支持，Vim 會通過恢復窗口角色的方法 (用命令行參數  <a href="starting.html#--role">--role</a> )，幫助窗口管
理器識別窗口。

</pre><hr class="doubleline" /><pre>
<h4>7. KDE 版本                                     <b class="vimtag"> <a name="gui-kde">gui-kde</a> </b> <b class="vimtag"> <a name="kde">kde</a> </b> <b class="vimtag"> <a name="KDE">KDE</a> </b> <b class="vimtag"> <a name="KVim">KVim</a> </b></h4>                                                        <b class="vimtag"> <a name="gui-x11-kde">gui-x11-kde</a> </b>

現在沒有 Vim 的 KDE 版本。曾有過基於 Qt 工具包的一些移植工作，但是一直不能正常
運行，而該項工作也已放棄。在 Yzis 上，還在開發。
https://github.com/chrizel/Yzis

</pre><hr class="doubleline" /><pre>
<h4>8. 編譯                                                 <b class="vimtag"> <a name="gui-x11-compiling">gui-x11-compiling</a> </b></h4>
如果使用 X11，Vim 的 configure 將首先試著在你的系統裡找到需要的 GTK+ 的文件。
如果同時有 GTK+ 2 和 GTK+ 3 可用，優先選擇 GTK+ 2，除非給 configure 顯式傳入
--enable-gui=gtk3。

如果找不到 GTK+ 文件，就試著找 Motif 文件。如果還是找不到，就找 Athena 文件。
如果全失敗， GUI 會被禁用。

對於 GTK+，Vim 的配置過程使用 pkg-config(1) 來確保特定版本的 GTK+ 被正確安裝並
可用。因此，最好在運行 configure 前確認系統的 pkg-config 可用，且有所需的 GTK+
版本的 .pc 文件。為此，運行以下命令來檢查 pkg-config 是否可用於 GTK+ 2: 
<code class="example"></code>
<code class="example">    $ pkg-config --modversion gtk+-2.0</code>
<code class="example"></code>
對 GTK+ 3，把 gtk+-2.0 替換為 gtk+-3.0。如果你有正確的 GTK+ 版本號，可以繼續；
不然，你可能要做些系統維護的例行工作來正確設置 pkg-config 和 GTK+。

缺省編譯已經帶了 GTK+ 2 GUI。所以，通常不需要傳入 --enable-gui=gtk2 之類的選項
來 configure 和編譯。

可選地，GTK+ 2 GUI 可以整合進 GNOME 2 的支持。給 configure 傳入
--enable-gnome-check 可以打開此項支持。

如要你想編譯 GTK+ 3 GUI，需要給 configure 顯式傳入 --enable-gui=gtk3，並避免傳
入 --enable-gnome-check，因為 GNOME 2 支持所需的功能已經整合進了 GTK+ 3 裡。

否則，如果你安裝了 Motif 或 Athena，但配置程序無法找到它們所在的目錄時，更改
Makefile 使之含有它們所在的目錄名稱。如，查找 "GUI_INC_LOC" 來設置 Motif 的目
錄，或 "GUI_OPT_X" 來設置 Athena 的目錄。

                                                        <b class="vimtag"> <a name="gui-x11-gtk">gui-x11-gtk</a> </b>
目前，Vim 支持 GTK+ 2 和 GTK+ 3。

GTK+ 2 GUI 需要 GTK+ 2.2 或更新版本。

儘管 GTK+ 3 GUI 源代碼的編寫方式使得 3.x 系列的所有版本都可以編譯通過，我們建
議 GTK+ 3.10 或更新版本，因為此版本在重畫上有較大的實現改動。

                                                        <b class="vimtag"> <a name="gui-x11-motif">gui-x11-motif</a> </b>
對於 Motif，你需要至少 1.2 和/或 X11R5 版本。Motif 2.0 和 X11R6 也可以。Motif
1.1 和 X11R4 可能可以工作，但不保證 (可能有些問題，但也許稍作改動就可以編譯、
運行成功。如果你這樣做了，請將補丁發給我)。最新版的 LessTif 據報告是可以的。

                                                        <b class="vimtag"> <a name="gui-x11-athena">gui-x11-athena</a> </b>
Athena 版本默認使用 Xaw widget。如果你有 3D 版本的，有可能要用 Xaw3d 來連接。
這樣菜單看上去好看些。編輯 Makefile 文件並查找 "XAW_LIB"。滾動條仍然一樣，因為
Vim 使用它自己的。它已經有 3D 效果了 (事實上，它更像 Motif 裡的滾動條)。

                                                        <b class="vimtag"> <a name="gui-x11-neXtaw">gui-x11-neXtaw</a> </b>
neXtaw 版本和 Athena 版本非常像，但使用不同的窗口組件 (widget)。

                                                        <b class="vimtag"> <a name="gui-x11-misc">gui-x11-misc</a> </b>
總的來說，不要混合不同版本的 GTK+，Motif，Athena，和 X11 的文件。這會引起問
題。如，使用 X11R5 的頭文件和 X11R6 的庫，大半不能工作 (儘管連接不報錯，Vim 之
後的運行將崩潰)。

</pre><hr class="doubleline" /><pre>
<h4>9. X11 選擇機制                                         <b class="vimtag"> <a name="x11-selection">x11-selection</a> </b></h4>
如果使用 X11，無論是 GUI 的還是 xterm 中運行的，Vim 都提供了多種使用 X11 的選
擇機制和剪貼板的方法。它們是通過兩個選擇寄存器 "* 和 "+ 來實現的。

X11 提供了兩種基本類型的全局存儲方式，選擇區和剪切緩衝區。在一個重要的方面它們
是有區別的: 選擇區是程序擁有的，並在程序退出時 (如 Vim) 消失，因而數據也消失
了。而剪切緩衝區存儲在 X 服務器的內部，會保持到被重寫或 X 服務器退出 (例如登出
時) 為止。

發起程序擁有選擇區的內容 (如，通過複製)，僅當其它程序請求時才執行傳送操作
(如，通過粘貼)。

剪切緩衝區立即被寫入，之後便可直接通過 X 服務器進行存取，無需與發起程序交互。

                                                        <b class="vimtag"> <a name="quoteplus">quoteplus</a> </b> <b class="vimtag"> <a name="quote+">quote+</a> </b>
文檔上說，有三種 X 選擇區: PRIMARY (用於代表當前的可視選擇內容，就像 Vim 的可
視模式的操作對像)，SECONDARY (定義不明) 和 CLIPBOARD (用於剪切、複製和粘貼操
作)。

在三種選擇區裡，Vim 使用 PRIMARY 用於讀寫 "* 寄存器 (因而，如果 X11 選擇區可
用，Vim 為  <a href="options.html#'clipboard'">'clipboard'</a>  的缺省值加上 "autoselect")。CLIPBOARD 用於讀寫 "+ 寄
存器。Vim 不使用 SECONDARY 選擇區。

例如: (假定使用默認選項)
- 在 Vim 的可視模式裡選中一個 URL。轉到你的瀏覽器的 URL 文本框裡並單擊鼠標中
  鍵。所選擇的文字將被插入 (希望如此！)。<code class="note">備註</code>: 在 Firefox 中，可以在
  about:config 裡設置 middlemouse.contentLoadURL 屬性為 true，這樣在窗口的大多
  數位置單擊鼠標中鍵都可以打開選中的 URL。
- 通過在你的瀏覽器中拖動鼠標選擇一段文字。再到 Vim 中並按鼠標中鍵: 選中的文字
  被插入。
- 在 Vim 裡選中一段文字並執行 "+y。轉到你的瀏覽器，拖動鼠標選中另一段文字。現
  在使用鼠標右鍵並在彈出菜單裡選擇 "Paste"。所選中的文字被 Vim 中選中的文字所
  替換。
<code class="note">備註</code>: 使用可視模式進行選擇時，"+ 寄存器中的文字仍然存在。而選中的文字存於 "*
寄存器中。這樣就可以選擇被覆蓋的文字了。
                                                        <b class="vimtag"> <a name="x11-cut-buffer">x11-cut-buffer</a> </b>
默認有 8 個剪切緩衝區: CUT_BUFFER0 到 CUT_BUFFER7。Vim 僅使用 CUT_BUFFER0，就
是 xterm 默認使用的那一個。

只有當 Vim 不可用 (或退出或掛起)，並且因此不能響應另一個程序的選擇區請求時，
Vim 才將它自己的選擇區內容寫入 CUT_BUFFER0 中。如果是 Vim 擁有 "+ CLIPBOARD 選
擇區，那麼優先寫入它的值；否則，如果 Vim 擁有 "* PRIMARY 選擇區，寫入該值。

類似的，當 Vim 試圖從 "* 或 "+ 來粘貼時 (或顯式或通過點擊鼠標中鍵隱式地對 "*
寄存器操作)，如果被請求的 X 選擇區為空或不可用，Vim 退而求取 CUT_BUFFER0 的
值。

<code class="note">備註</code>: 用這種方式複製文字到 CUT_BUFFER0 時，選擇區的類型 (字符，行或列塊) 總是
被丟失，即使之後要粘貼的還是 Vim。

默認情況下 Xterm 總是將選擇區內容同時寫入 PRIMARY 和 CUT_BUFFER0 中。當它粘貼
時，xterm 會優先選用 PRIMARY。如果失敗才會選用 CUT_BUFFER0。因此，在 Vim 和
Xterm 之間剪切和粘貼時，你應該使用 "* 寄存器。Xterm 不用 CLIPBOARD，所以 "+ 在
xterm 中無效。

多數較新的應用程序會通過 PRIMARY ("*) 來提供它們當前的選擇區內容，並使用
CLIPBOARD ("+) 用作剪切、拷貝、粘貼操作。你可以通過選擇 "* 或 "+ 寄存器來訪問
兩者。


 vim:tw=78:sw=4:ts=8:ft=help:norl:
</pre>
<p><i>Generated by vim2html</i></p>
</div>
</body>
</html>
